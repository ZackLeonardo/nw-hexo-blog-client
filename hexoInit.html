<!DOCTYPE html>
<html>
<head>
  <!-- OR NONE IF YOU ARE USING PURE JAVASCRIPT -->
  <meta charset="utf-8">
  <script src="src/components/backServer/files.js"></script>
  <script src="src/components/backServer/hexo.js"></script>
  <script src="src/components/backServer/clientConfig.js"></script>
  <link rel="stylesheet" href="css/buttons.css">
  <script src="js/jquery-2.1.4.js"></script>

</head>
<body>
  <div class="">
    <h1>please choose a hexo dictionary:</h1>

    <a href="#" class="button button-rounded button" onclick="mc()">choose folder</a>
    <h3 id="puf"></h3>
    <input id="fileDialog" type="file" nwdirectory style="display:none" onChange="chooseFile('#fileDialog')"/>


    <p id="hexo_logs"></p>
    <p id="npm_logs"></p>
  </div>
  <!-- <script>
  $=function(id){return document.getElementById(id);}
  function mc(){var _i=$("fileDialog");_i.click();}
  function mm(){$("puf").value=(document.f1.uf.value);}
  window.onload=function(){
  }
  </script> -->
  <script>
    function mc(){
      $("#fileDialog").click();
    }

    function mm() {
      $("#puf").text($("#fileDialog").val());
    }

    function chooseFile(name) {
      mm();
      var chooser = document.querySelector(name);
      chooser.addEventListener("change", function(evt) {
        if (this.value != ''){
          var r=confirm("the folder will be emptied, are you sure?")
          if (r==true)
          {
            deleteFile("./config.yml");
            deleteFolderRecursive(this.value);
            mkdir(this.value);
            writeConfigFile(this.value);
            hexoInit(this.value);

          }else{
            console.log(this.value + "kept as it was.");
          }
        }
      }, false);
      // chooser.click();
    }
    chooseFile('#fileDialog');
  </script>

</body>
</html>
